(()=>(e,t)=>{const n=async e=>{const{open:t,close:n}=e;const i=await videoCondition();if(!i){return}const s=await SpinQuery.select(".bilibili-player");if(!s){return}const o=Observer.childList(s,(()=>{const e=dq(".bilibili-player-context-menu-origin");if(e){o.stop();const i=dq(e,"ul");const s={containerElement:e,listElement:i,get itemElements(){return dqa(e,".context-menu-function")},get isOpen(){return e.classList.contains("active")}};Observer.childList(i,(()=>{if(s.isOpen){t===null||t===void 0?void 0:t(s)}else{n===null||n===void 0?void 0:n(s)}}))}}))};const i=async(e,t)=>n({open:t=>{if(t.listElement.contains(e)){return}const n=document.createElement("li");n.classList.add("context-line","context-menu-function");n.setAttribute("data-append","1");const i=document.createElement("a");i.classList.add("context-menu-a","js-action");i.href="javascript:void(0);";i.appendChild(e);n.addEventListener("mouseover",(()=>n.classList.add("hover")));n.addEventListener("mouseout",(()=>n.classList.remove("hover")));n.appendChild(i);t.listElement.appendChild(n)},close:e=>t===null||t===void 0?void 0:t(e)});return{export:{forEachContextMenu:n,addMenuItem:i}}})();